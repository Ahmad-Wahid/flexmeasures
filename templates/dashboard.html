{% extends "base.html" %}

{% set active_page = "dashboard" %}

{% block title %} Dashboard {% endblock %}

{% block divs %}

    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-3 top-bottom">
                <h3>About</h3>
                <div class="justify">
                    This is a Virtual Power Plant (VPP) platform for Aggregators and Energy Service Companies operating on Jeju island.
                    The VPP consists of many assets (energy resources) located on the island, whose electrical load are monitored and forecasted by the platform.
                    The platform also monitors and forecasts market prices for electricity.
                    Finally, the platform offers various control options over Active Demand & Supply from flexible assets within the platform.
                    <!--For each possible control action, the user is informed on its expected value and the associated financial risks.-->
                </div>
                <div class="todo">
                    <h3>To do</h3>
                    <div class="justify">
                        <table class="table" style="font-size: 100%;">
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>Expected</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>User authentication</td>
                                    <td>M2</td>
                                </tr>
                                <tr>
                                    <td>Language toggling</td>
                                    <td>M3</td>
                                </tr>
                                <tr>
                                    <td>Asset locations updated from database</td>
                                    <td>Extra</td>
                                </tr>
                                <tr>
                                    <td>...</td>
                                    <td>...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-sm-9">
                <div class="row eq-height">
                    <div class="col-sm-12">
                        <h3>{% if not prosumer_mock: %}VPP status:{% else %}Status of my assets:{% endif%}
                        </h3>
                            <div class="todo">
                                {% if not prosumer_mock: %}
                                This is the <b>dashboard view of an aggregator or supplier (A1)</b>. All assets are listed.
                                Not all assets are on the map at this point, however.
                                <button onclick="window.location.href='?prosumer_mock=1'">Switch to view of a prosumer.</button>
                                {% endif %}
                                {% if prosumer_mock: %}
                                This is the <b>dashboard view of a prosumer</b> (in this case, an owner of two onshore wind farms). Only the assets owned by this prosumer are listed.
                                Not all assets are on the map at this point, however.
                                <button onclick="window.location.href='?prosumer_mock=0'">Switch to view of a aggregators/supplier (A1).</button>
                                {% endif %}
                            </div>
                        <div id="mapid"></div>
                        <table class="table" style="font-size: 100%;">
                            <thead>
                                <tr>
                                    <th></th>
                                    {% if asset_counts["wind"] > 0 %}<th>Wind turbines</th>{% endif %}
                                    {% if asset_counts["solar"] > 0 %}<th>PV units</th>{% endif %}
                                    {% if asset_counts["house"] > 0 %}<th>Buildings</th>{% endif %}
                                    {% if asset_counts["battery"] > 0 %}<th>Battery units</th>{% endif %}
                                    {% if asset_counts["vehicles"] > 0 %}<th>EV charging stations</th>{% endif %}
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{% if not prosumer_mock: %}VPP total:{% else %}My assets:{% endif%}</td>
                                    {% if asset_counts["wind"] > 0 %}
                                    <td>
                                        <label class="icon-left">
                                            <img src="/public/icons/wind.svg" alt="Wind">
                                        </label>
                                        {{ asset_counts["wind"]}}</td>
                                    {% endif %}
                                    {% if asset_counts["solar"] > 0 %}
                                    <td>
                                        <label class="icon-left">
                                            <img src="/public/icons/sun.svg" alt="Sun">
                                        </label>
                                        {{ asset_counts["solar"]}}</td>
                                    {% endif %}
                                    {% if asset_counts["house"] > 0 %}
                                    <td>
                                        <label class="icon-left">
                                            <img src="/public/icons/house.svg" alt="House">
                                        </label>
                                        {{ asset_counts["house"]}}</td>
                                    {% endif %}
                                    {% if asset_counts["battery"] > 0 %}
                                    <td>
                                        <label class="icon-left">
                                            <img src="/public/icons/battery.svg" alt="Car">
                                        </label>
                                        {{ asset_counts["battery"]}}</td>
                                    {% endif %}
                                    {% if asset_counts["vehicles"] > 0 %}
                                    <td>
                                        <label class="icon-left">
                                            <img src="/public/icons/car.svg" alt="Car">
                                        </label>
                                        {{ asset_counts["vehicles"]}}</td>
                                    {% endif %}
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
